{"version":3,"sources":["track_sheduler/consts.js","track_sheduler/TrackLine.jsx","track_sheduler/Tracks.jsx","track_sheduler/TrackUploader.jsx","track_sheduler/TrackScheduler.jsx","App.js","reportWebVitals.js","track_sheduler/utils.js","reduser/servantFileUpload.js","reduser/servantInit.js","reduser/servantOnChangeTrack.js","reduser/index.js","index.js"],"names":["ON_CHANGE_FILES","ON_CHANGE_TRACK","ACTION_INIT","ONE_HOUR","IS_24_HOURS_OF_MS","connect","dispatch","onChangeTrack","v","type","value","props","track","line_left","line_width","sign_time","id","onMouseDownArrow","e","arrow","target","onmousedown","ondragstart","rectArrow","getBoundingClientRect","shellTrackLine","parentNode","shellTrackLineRect","rightArrow","children","trackLine","trackLineRect","rightEdge","left","width","maxWidth","shiftX","className","clientX","document","onmousemove","nowLeft","style","nowWidth","Number","slice","length","onmouseup","onMouseDown","onMouseDownTrack","currentTarget","leftArrow","trackRect","rightArrowRect","startPoint","diff","state","tracks","map","i","title","name","colSpan","onChangeFiles","multiple","accept","display","onChange","newFiles","files","htmlFor","TrackScheduler","oneHourTh","useRef","role","ref","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","msToPixels","ms","dt","Date","zeroDate","setMilliseconds","getMilliseconds","hours","getHours","minutes","getMinutes","Math","ceil","pixelsToMs","px","toFixed","floor","setHours","getTime","msToTime","toString","getSeconds","updatePropertyOfTracks","start_ms","end_ms","updateTimeTrack","trackData","startTime","endTime","durationTime","servantFileUpload","action","servantInit","servantOnChangeTrack","changedTrack","store","createStore","Error","ReactDOM","render","StrictMode","getElementById"],"mappings":"uMACaA,EAAkB,gBAClBC,EAAkB,gBAClBC,EAAc,SAGdC,EAAwB,kBACxBC,EAAoB,MC4JlBC,cACX,MACC,SAAAC,GAAQ,MAAK,CACVC,cAAe,SAAEC,GACbF,EAAU,CAACG,KAAMR,EAAiBS,MAAOF,QAJtCH,EA/JG,SAAEM,GAAU,IAAD,EAIbA,EAAMC,MAHZC,EADmB,EACnBA,UACIC,EAFe,EAEfA,WACAC,EAHe,EAGfA,UAIHR,EAAsBI,EAAtBJ,cAAeS,EAAOL,EAAPK,GAKhBC,EAAmB,SAAnBA,EAAqBC,GACvB,IAAMC,EAAQD,EAAEE,OAChBD,EAAME,YAAc,KACpBF,EAAMG,YAAc,kBAAK,GAGzB,IAAMC,EAAYJ,EAAMK,wBAClBC,EAAiBN,EAAMO,WACvBC,EAAqBF,EAAeD,wBACpCI,EAAaH,EAAeI,SAAU,GACtCC,EAAYL,EAAeI,SAAU,GACrCE,EAAgBD,EAAUN,wBAC1BQ,EAAcD,EAAcE,KAAON,EAAmBM,MAAWF,EAAcG,MAAQX,EAAUW,MAdrF,IAeZC,EAAaR,EAAmBO,MAAQP,EAAmBM,KAASF,EAAcE,KAAOV,EAAUW,MACnGE,EAA6B,eAApBjB,EAAMkB,UACbnB,EAAEoB,QAAUf,EAAUU,KACxBf,EAAEoB,QAAUP,EAAcG,MAAQH,EAAcE,KAEtDM,SAASC,YAAc,SAAEtB,GAErB,GAAwB,eAApBC,EAAMkB,UAA4B,CAClC,IAAII,EAAYvB,EAAEoB,QAAUX,EAAmBM,KAASG,EACpDK,EAAU,EAAIA,EAAU,EAClBA,EAAUT,IAAYS,EAAUT,GAC1Cb,EAAMuB,MAAMT,KAAOQ,EAAU,KAG7B,IAAME,EAAeX,EAAYS,EA9B3B,GA+BNX,EAAUY,MAAMT,KAAQQ,EAAU,KAClCX,EAAUY,MAAMR,MAAQS,EAAW,KACnCf,EAAWc,MAAMT,KAASQ,EAAY,KAGtClC,EAAe,CAAES,KACCiB,KAAMQ,EACNP,MAAOS,QACvB,CAEF,IAAIA,EAAWzB,EAAEoB,QAAUP,EAAcE,KAAOG,EAE5CO,EA1CM,GA0CqBA,EA1CrB,GA2CDA,EAAWR,IAAWQ,EAAWR,GAC1CL,EAAUY,MAAMR,MAAQS,EAAW,KAEnC,IAAMV,EAAOH,EAAUY,MAAMT,KACvBQ,EAAUG,OAAQX,EAAKY,OAAQZ,EAAKa,OAAQb,EAAKa,OAAS,IAEhEvC,EAAe,CACXS,KACEiB,KAAMQ,EACNP,MAAOS,MASrBJ,SAASQ,UAAY,WACjBR,SAASC,YAAa,KACtBD,SAASQ,UAAW,KACpB5B,EAAME,YAAcJ,IA6D5B,OAEE,sBAAKoB,UAAU,mBAAf,UACI,qBAAKA,UAAU,aACVK,MAAO,CAAET,KAAMpB,GACfmC,YAAc/B,EAFnB,eAIA,qBAAKoB,UAAU,aACVK,MAAO,CAAET,KAAMpB,EAAWqB,MAAOpB,GACjCkC,YAjEc,SAAnBC,EAAqB/B,GAEvBA,EAAEE,OAAOC,YAAc,KACvBH,EAAEE,OAAOE,YAAc,kBAAK,GAE5B,IAAMG,EAAiBP,EAAEgC,cAAcxB,WACjCC,EAAqBF,EAAeD,wBACpC2B,EAAY1B,EAAeI,SAAU,GACrCjB,EAAQa,EAAeI,SAAU,GACjCuB,EAAYxC,EAAMY,wBAClBI,EAAaH,EAAeI,SAAU,GACtCwB,EAAiBzB,EAAWJ,wBAC9B8B,EAAaF,EAAUnB,KACvBG,EAASlB,EAAEoB,QAAUc,EAAUnB,KAnFrB,GAoFd,GAAIrB,EAAM8B,MAAMT,KAAM,CAClB,IAAMA,EAAOrB,EAAM8B,MAAMT,KACnBQ,EAAUG,OAAQX,EAAKY,OAAQZ,EAAKa,OAAQb,EAAKa,OAAS,IAChEQ,GAA0Bb,EAC1BL,EAASlB,EAAEoB,QAAUc,EAAUnB,KAInC,IAAMD,EAAYL,EAAmBO,OAAkC,EAAvBmB,EAAenB,MAAYkB,EAAUlB,OAGrFK,SAASC,YAAc,SAAEtB,GAGrB,IAAIqC,EAAOrC,EAAEoB,QAAUgB,EAAalB,EAChCmB,EAAO,EAAIA,EAAO,EACbA,EAAOvB,IAAYuB,EAAOvB,GACnCpB,EAAM8B,MAAMT,KAAOsB,EAAO,KAC1BJ,EAAUT,MAAMT,KAAOsB,EAAO,KAC9B3B,EAAWc,MAAMT,KAAOsB,EAAO,KAG/B,IAAMrB,EAAQtB,EAAM8B,MAAMR,MACpBS,EAAWC,OAAQV,EAAMW,OAAQX,EAAMY,OAAQZ,EAAMY,OAAS,IAEpEvC,EAAe,CACXS,KACEiB,KAAMsB,EACNrB,MAAOS,KAGjBJ,SAASQ,UAAY,WACjBnC,EAAMS,YAAc4B,EACpBV,SAASC,YAAc,KACvBD,SAASQ,UAAY,OAevB,SAGI,qBAAKV,UAAU,UAAf,SACMtB,MAGV,qBAAKsB,UAAU,cACVK,MAAO,CAAET,KAAMpB,GACfmC,YAAc/B,EAFnB,qBCrIKZ,eAEX,SAAAmD,GACI,MAAQ,CACJC,OAAQD,EAAMC,UAEnB,KANQpD,EAhBA,SAAC,GAEZ,OAF2B,EAAZoD,OAEDC,KAAK,SAAElD,EAAGmD,GAAL,OAEf,+BACI,oBAAIC,MAAQpD,EAAEqD,KAAd,SAAwBrD,EAAEqD,OAC1B,oBAAIC,QAAQ,KAAZ,SACI,cAAC,EAAD,CACIlD,MAAQJ,EAAIQ,GAAK2C,QAJpB,WAAaA,S,OCgBftD,cACX,MACC,SAAAC,GAAQ,MAAK,CACVyD,cAAe,SAAEvD,GACbF,EAAU,CAACG,KAAMT,EAAiBU,MAAOF,QAJtCH,EApBO,SAAC,GAAsB,IAAnB0D,EAAkB,EAAlBA,cAStB,OACI,gCACI,uBAAOtD,KAAK,OAAOO,GAAG,WACfgD,UAAQ,EAACC,OAAO,UAChBvB,MAAO,CAACwB,QAAQ,QAChBC,SAZO,SAAEjD,GACpB,IAAMkD,EAAW,YAAKlD,EAAEE,OAAOiD,OAAQX,KAAK,SAAElD,GAC1C,OAAOA,EAAEqD,QAEbE,EAAeK,MASX,uBAAOE,QAAQ,WAAWjC,UAAW,eAArC,mGCgDGkC,EA5DQ,WAInB,IAAMC,EAAYC,iBAAQ,MAQ1B,OACI,sBAAMC,KAAK,OAAX,SACI,oCACI,cAAC,EAAD,IACA,kCACI,mGACA,gCACA,+BACI,kFACA,mCACA,qBAAIC,IAAMH,EAAV,UAAsB,sCAAtB,SACA,+BAAI,sCAAJ,SACA,+BAAI,sCAAJ,SACA,+BAAI,sCAAJ,SACA,+BAAI,sCAAJ,SACA,+BAAI,sCAAJ,SACA,+BAAI,sCAAJ,SACA,+BAAI,sCAAJ,SACA,+BAAI,sCAAJ,SACA,+BAAI,sCAAJ,SACA,+BAAI,sCAAJ,SACA,+BAAI,sCAAJ,SACA,+BAAI,sCAAJ,SACA,+BAAI,sCAAJ,SACA,+BAAI,sCAAJ,SACA,+BAAI,sCAAJ,SACA,+BAAI,sCAAJ,SACA,+BAAI,sCAAJ,SACA,+BAAI,sCAAJ,SACA,+BAAI,sCAAJ,SACA,+BAAI,sCAAJ,SACA,+BAAI,sCAAJ,SACA,+BAAI,sCAAJ,SACA,+BAAI,sCAAJ,SACA,+BAAI,sCAAJ,SACA,wCAGJ,gCACI,cAAC,EAAD,eC/CTI,MARf,WACE,OACE,qBAAKvC,UAAU,MAAf,SACE,cAAC,EAAD,OCMSwC,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,O,cCLDQ,EAAa,SAACC,GACvB,IAAMC,EAAK,IAAIC,KAAM,GACfC,EAAW,IAAID,KAAM,GAC3BD,EAAGG,gBAAiBH,EAAGI,kBAAoBL,GAC3C,IAAIM,EAAUL,EAAGM,WAAaJ,EAASI,WACnCC,EAAYP,EAAGQ,aAAeN,EAASM,aAK3C,OAJIT,GAAMnF,IAAmB2F,EAAU,GACvCF,GAASE,EAAU,GACfR,GAAMnF,IAAoByF,EAAQ,IAE/BI,KAAKC,KAAML,EAAQ1F,IAGjBgG,EAAa,SAACC,GAEvB,IAAIP,EAAQjD,OAAQA,OAAQwD,EAAKjG,GAAqBkG,QAAS,IAE3DN,EAAUE,KAAKC,KAAQL,EAAM,EAAM,IACvCA,EAAQI,KAAKK,MAAOT,GACpB,IAAML,EAAK,IAAIC,KAAM,GAGrB,OAFAD,EAAGe,SAAUf,EAAGM,WAAaD,EAAOL,EAAGQ,aAAeD,EAAS,EAAG,GAEzDP,EAAGgB,UAAY,IAAIf,KAAM,GAAIe,WAG7BC,EAAW,SAAElB,GAEtB,IAAMC,EAAK,IAAIC,KAAK,GAEpBD,EAAGe,SAAU,GACbf,EAAGG,gBAAiBJ,GAEpB,IAAMG,EAAW,IAAID,KAAM,GAC3BC,EAASa,SAAU,GACnB,IAAIV,GAAUL,EAAGM,WAAaJ,EAASI,YAAaY,WAG/B,IAAjBb,EAAM/C,SAAe+C,EAAQ,IAAMA,GAEvC,IAAIE,EAAYP,EAAGQ,aAAeN,EAASM,aAS3C,OARIR,EAAGmB,aAAejB,EAASiB,eAAeZ,GAAW,GACvB,IAA9BA,EAAQW,WAAW5D,SAAeiD,EAAU,IAAMA,GAExC,OAAVF,GAAkBN,GAAOnF,IAEzByF,EAAQ,KACRE,EAAU,MAER,CACJF,QACIE,QAASA,EAAQW,aAIdE,EAAyB,SAACnD,GAEnC,OAAOA,EAAOC,KAAK,SAAElD,GACjB,OAAO,2BAAIA,GAAX,IACKK,UAAWyE,EAAY9E,EAAEqG,UACzB/F,WAAYwE,EAAY9E,EAAEsG,OAAStG,EAAEqG,UACpC9F,UAAWgG,EAAiBvG,SAS7BuG,EAAkB,SAAEC,GAG7B,IAAMC,EAAYR,EAAUO,EAAUH,UAChCK,EAAUT,EAAUO,EAAUF,QAC9BK,EAAeV,EAAUO,EAAUF,OAASE,EAAUH,UAE5D,MAAO,UAAII,EAAUpB,MAAd,YAAwBoB,EAAUlB,QAAlC,cAAgDmB,EAAQrB,MAAxD,YAAkEqB,EAAQnB,SAA1E,YACGoB,EAAatB,MADhB,kBAC2BsB,EAAapB,QADxC,wBCnDIqB,EAzBW,SAAE5D,EAAO6D,GAAW,IAItC5D,EACAD,EADAC,OAIA/C,EACA2G,EADA3G,MAWJ,OARA+C,EAAM,sBAAQA,GAAR,YAAmB/C,EAAMgD,KAAK,SAAElD,GAClC,MAAM,CACFqD,KAAMrD,EACJqG,SAAU,EACVC,OAAQ,WAIlB,2BACWtD,GADX,IAEUC,OAAQmD,EAAwBnD,MCN/B6D,EAfK,SAAC9D,GAAU,IAIvBC,EACAD,EADAC,OAKJ,OAFAA,EAASmD,EAAwBnD,GAEjC,2BACOD,GADP,IAEMC,YCUK8D,EArBc,SAAC/D,EAAO6D,GAAW,IAGtC5D,EAAWD,EAAXC,OAGA+D,EAAeH,EAAO3G,MAS5B,OARA+C,EAAQ+D,EAAaxG,IAArB,2BACOyC,EAAQ+D,EAAaxG,KAD5B,IAEM6F,SAAUV,EAAYqB,EAAavF,MACnC6E,OAAQX,EAAYqB,EAAavF,KAAOuF,EAAatF,SAG3DuB,EAAQ+D,EAAaxG,IAAKD,UAAYgG,EAAkBtD,EAAQ+D,EAAaxG,KAE7E,2BACOwC,GADP,IAEMC,OAAO,YAAMA,MCdVgE,EAAQ,CACjBhE,OAAO,CACH,CACII,KAAM,UACJgD,SAAU,MACVC,OAAQ,SAGZ,CACEjD,KAAM,WACJgD,SAAU,KACVC,OAAQ,OAEZ,CACEjD,KAAM,mDACJgD,SAAU,OACVC,OAAQ,SAEZ,CACEjD,KAAM,6BACJgD,SAAU,KACVC,OAAQ,QCjBtB,IAAMW,EAAQC,aDwBC,WAA4C,IAAzBlE,EAAwB,uDAAhBiE,EAAOJ,EAAS,uCAEtD,OAASA,EAAO5G,MAIZ,KAAKP,EACDsD,EAAO8D,EAAa9D,GACpB,MACJ,KAAKxD,EACDwD,EAAQ4D,EAAmB5D,EAAO6D,GAClC,MAEJ,KAAKpH,EACDuD,EAAQ+D,EAAsB/D,EAAO6D,GACrC,MAEJ,QAAS,MAAM,IAAIM,MAAO,iCAM9B,OAAOnE,KC7CXoE,IAASC,OACL,cAAC,IAAD,CAAUJ,MAAQA,EAAlB,SACE,cAAC,IAAMK,WAAP,UACE,cAAC,EAAD,QAGNvF,SAASwF,eAAe,SAM1BlD,M","file":"static/js/main.eece8300.chunk.js","sourcesContent":["///actions\r\nexport const ON_CHANGE_FILES = 'onChangeFiles';\r\nexport const ON_CHANGE_TRACK = 'onChangeTrack';\r\nexport const ACTION_INIT = '@@INIT';\r\n\r\n\r\nexport const ONE_HOUR = { pixelSize: 28.33333333333333 };\r\nexport const IS_24_HOURS_OF_MS = 86400000;\r\n\r\n","import React from 'react';\r\nimport {connect} from \"react-redux\";\r\nimport {ON_CHANGE_TRACK} from \"./consts\";\r\n\r\nconst TrackLine = ( props )=>{\r\n  const { line_left\r\n            , line_width\r\n            , sign_time\r\n            } = props.track;\r\n\r\n\r\n    const {onChangeTrack, id } = props;\r\n\r\n    const styleLeft = 10;\r\n    const minimumLength = 10;\r\n\r\n    const onMouseDownArrow = ( e )=>{\r\n        const arrow = e.target;\r\n        arrow.onmousedown = null;\r\n        arrow.ondragstart = ()=> false;\r\n\r\n\r\n        const rectArrow = arrow.getBoundingClientRect();\r\n        const shellTrackLine = arrow.parentNode;\r\n        const shellTrackLineRect = shellTrackLine.getBoundingClientRect();\r\n        const rightArrow = shellTrackLine.children[ 2 ];\r\n        const trackLine = shellTrackLine.children[ 1 ];\r\n        const trackLineRect = trackLine.getBoundingClientRect();\r\n        const rightEdge = ( trackLineRect.left - shellTrackLineRect.left ) + ( trackLineRect.width - rectArrow.width - minimumLength ) ;\r\n        const maxWidth = ( shellTrackLineRect.width + shellTrackLineRect.left ) - trackLineRect.left - rectArrow.width;\r\n        const shiftX = arrow.className === 'arrow_left'\r\n            ? ( e.clientX - rectArrow.left )\r\n            : e.clientX - trackLineRect.width - trackLineRect.left;\r\n\r\n        document.onmousemove = ( e )=>{\r\n\r\n            if( arrow.className === 'arrow_left' ){\r\n                let nowLeft = ( e.clientX - shellTrackLineRect.left ) - shiftX;\r\n                if( nowLeft < 0 ) nowLeft = 0;\r\n                else if ( nowLeft > rightEdge ) nowLeft = rightEdge;\r\n                arrow.style.left = nowLeft + 'px';\r\n\r\n\r\n                const nowWidth = ( ( rightEdge - nowLeft ) + styleLeft );\r\n                trackLine.style.left =  nowLeft + 'px';\r\n                trackLine.style.width = nowWidth + 'px';\r\n                rightArrow.style.left = ( nowLeft ) + 'px';\r\n\r\n\r\n                onChangeTrack( { id\r\n                                , left: nowLeft\r\n                                , width: nowWidth });\r\n            } else{\r\n\r\n                let nowWidth = e.clientX - trackLineRect.left - shiftX;\r\n\r\n                if( nowWidth < minimumLength ) nowWidth = minimumLength;\r\n                else if( nowWidth > maxWidth ) nowWidth = maxWidth;\r\n                trackLine.style.width = nowWidth + 'px';\r\n\r\n                const left = trackLine.style.left;\r\n                const nowLeft = Number( left.slice( -left.length, left.length - 2 ) );\r\n\r\n                onChangeTrack( {\r\n                    id\r\n                    , left: nowLeft\r\n                    , width: nowWidth }   );\r\n\r\n            }\r\n\r\n\r\n\r\n\r\n        };\r\n\r\n        document.onmouseup = ()=>{\r\n            document.onmousemove =null;\r\n            document.onmouseup =null;\r\n            arrow.onmousedown = onMouseDownArrow;\r\n        };\r\n\r\n    };\r\n\r\n    const onMouseDownTrack = ( e )=>{\r\n\r\n        e.target.onmousedown = null;\r\n        e.target.ondragstart = ()=> false;\r\n\r\n        const shellTrackLine = e.currentTarget.parentNode;\r\n        const shellTrackLineRect = shellTrackLine.getBoundingClientRect();\r\n        const leftArrow = shellTrackLine.children[ 0 ];\r\n        const track = shellTrackLine.children[ 1 ];\r\n        const trackRect = track.getBoundingClientRect();\r\n        const rightArrow = shellTrackLine.children[ 2 ];\r\n        const rightArrowRect = rightArrow.getBoundingClientRect();\r\n        let startPoint = trackRect.left;\r\n        let shiftX = e.clientX - trackRect.left - styleLeft;\r\n        if( track.style.left ){\r\n            const left = track.style.left;\r\n            const nowLeft = Number( left.slice( -left.length, left.length - 2 ) );\r\n            startPoint = startPoint - nowLeft;\r\n            shiftX = e.clientX - trackRect.left;\r\n        }\r\n\r\n\r\n        const rightEdge = shellTrackLineRect.width  - ( rightArrowRect.width * 2 + trackRect.width );\r\n\r\n\r\n        document.onmousemove = ( e )=>{\r\n\r\n\r\n            let diff = e.clientX - startPoint - shiftX;\r\n            if( diff < 0 ) diff = 0;\r\n            else if( diff > rightEdge ) diff = rightEdge;\r\n            track.style.left = diff + 'px';\r\n            leftArrow.style.left = diff + 'px';\r\n            rightArrow.style.left = diff + 'px';\r\n\r\n\r\n            const width = track.style.width;\r\n            const nowWidth = Number( width.slice( -width.length, width.length - 2 ) );\r\n\r\n            onChangeTrack( {\r\n                id\r\n                , left: diff\r\n                , width: nowWidth } );\r\n        };\r\n\r\n        document.onmouseup = ( )=>{\r\n            track.onmousedown = onMouseDownTrack;\r\n            document.onmousemove = null;\r\n            document.onmouseup = null;\r\n        };\r\n\r\n\r\n    };\r\n\r\n\r\n\r\n    return(\r\n\r\n      <div className=\"shell_track_line\">\r\n          <div className=\"arrow_left\"\r\n               style={{ left: line_left }}\r\n               onMouseDown={ onMouseDownArrow }\r\n          > </div>\r\n          <div className=\"track_line\"\r\n               style={{ left: line_left, width: line_width}}\r\n               onMouseDown={ onMouseDownTrack } >\r\n              <div className=\"in_info\">\r\n                  { sign_time }\r\n              </div>\r\n          </div>\r\n          <div className=\"arrow_right\"\r\n               style={{ left: line_left }}\r\n               onMouseDown={ onMouseDownArrow }\r\n          > </div>\r\n      </div>\r\n\r\n\r\n  );\r\n};\r\n\r\nexport default connect(\r\n    null\r\n    ,dispatch => ({\r\n        onChangeTrack: ( v ) => {\r\n            dispatch( {type: ON_CHANGE_TRACK, value: v })\r\n        }\r\n    })\r\n)( TrackLine );","import React from 'react';\r\nimport {connect} from \"react-redux\";\r\nimport TrackLine from \"./TrackLine\";\r\n\r\nconst Tracks = ( { tracks })=> {\r\n\r\n    return tracks.map( ( v, i )=>(\r\n\r\n        <tr key={'tr_track' + i }>\r\n            <td title={ v.name } >{ v.name }</td>\r\n            <td colSpan=\"27\">\r\n                <TrackLine\r\n                    track={ v } id={ i } />\r\n\r\n            </td>\r\n        </tr>\r\n\r\n    ) );\r\n};\r\n\r\nexport default connect(\r\n\r\n    state => {\r\n        return ({\r\n            tracks: state.tracks\r\n        });\r\n    }, null\r\n)( Tracks );","import React from 'react';\r\nimport {connect } from 'react-redux';\r\nimport {ON_CHANGE_FILES} from \"./consts\";\r\n\r\nconst TrackUploader = ( { onChangeFiles })=>{\r\n\r\n    const changeHandler = ( e ) => {\r\n        const newFiles = [ ...e.target.files ].map( ( v )=>{\r\n            return v.name;\r\n        });\r\n        onChangeFiles( newFiles );\r\n    };\r\n\r\n    return(\r\n        <div>\r\n            <input type=\"file\" id=\"fileElem\"\r\n                   multiple accept=\"audio/*\"\r\n                   style={{display:'none'}}\r\n                   onChange={ changeHandler }/>\r\n            <label htmlFor=\"fileElem\" className={'button_files'}>Добавить треки</label>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default connect(\r\n    null\r\n    ,dispatch => ({\r\n        onChangeFiles: ( v ) => {\r\n            dispatch( {type: ON_CHANGE_FILES, value: v })\r\n        }\r\n    })\r\n)( TrackUploader );","import React, {useRef, useEffect } from 'react';\r\nimport '../css/index.css';\r\nimport Tracks from \"./Tracks\";\r\nimport OutInfoLayer from \"./OutInfoLayer\";\r\nimport TrackUploader from \"./TrackUploader\";\r\n//import { ONE_HOUR  } from \"./consts\";\r\n\r\nconst TrackScheduler = ()=>{\r\n\r\n\r\n    /// Работает неверно, не учитывает отступы\r\n    const oneHourTh = useRef( null );\r\n    /*useEffect(() => {\r\n        if( oneHourTh.current ){\r\n            // eslint-disable-next-line\r\n            ONE_HOUR.pixelSize  = oneHourTh.current.getBoundingClientRect().width;\r\n        }\r\n    });*/\r\n\r\n    return(\r\n        <main role=\"main\">\r\n            <section>\r\n                <TrackUploader />\r\n                <table>\r\n                    <caption>Расписание</caption>\r\n                    <thead>\r\n                    <tr>\r\n                        <th>Название</th>\r\n                        <th> </th>\r\n                        <th ref={ oneHourTh }><span>00</span>:00</th>\r\n                        <th><span>01</span>:00</th>\r\n                        <th><span>02</span>:00</th>\r\n                        <th><span>03</span>:00</th>\r\n                        <th><span>04</span>:00</th>\r\n                        <th><span>05</span>:00</th>\r\n                        <th><span>06</span>:00</th>\r\n                        <th><span>07</span>:00</th>\r\n                        <th><span>08</span>:00</th>\r\n                        <th><span>09</span>:00</th>\r\n                        <th><span>10</span>:00</th>\r\n                        <th><span>11</span>:00</th>\r\n                        <th><span>12</span>:00</th>\r\n                        <th><span>13</span>:00</th>\r\n                        <th><span>14</span>:00</th>\r\n                        <th><span>15</span>:00</th>\r\n                        <th><span>16</span>:00</th>\r\n                        <th><span>17</span>:00</th>\r\n                        <th><span>18</span>:00</th>\r\n                        <th><span>19</span>:00</th>\r\n                        <th><span>20</span>:00</th>\r\n                        <th><span>21</span>:00</th>\r\n                        <th><span>22</span>:00</th>\r\n                        <th><span>23</span>:00</th>\r\n                        <th><span>00</span>:00</th>\r\n                        <th> </th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <Tracks />\r\n                    </tbody>\r\n                </table>\r\n                {/*<OutInfoLayer/>*/}\r\n            </section>\r\n        </main>\r\n    )\r\n};\r\n\r\nexport default TrackScheduler;","import React from 'react';\nimport TrackScheduler from \"./track_sheduler/TrackScheduler\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <TrackScheduler/>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {IS_24_HOURS_OF_MS, ONE_HOUR} from \"./consts\";\r\n\r\nexport const msToPixels = (ms )=>{\r\n    const dt = new Date( 0 );\r\n    const zeroDate = new Date( 0 );\r\n    dt.setMilliseconds( dt.getMilliseconds() + ms );\r\n    let hours = ( dt.getHours() - zeroDate.getHours() );\r\n    let minutes = ( dt.getMinutes() - zeroDate.getMinutes() );\r\n    if( ms >= IS_24_HOURS_OF_MS )minutes = 0;\r\n    hours += minutes / 60;\r\n    if( ms >= IS_24_HOURS_OF_MS ) hours = 24;\r\n\r\n    return Math.ceil( hours * ONE_HOUR.pixelSize );\r\n};\r\n\r\nexport const pixelsToMs = (px )=>{\r\n\r\n    let hours = Number( Number( px / ONE_HOUR.pixelSize ).toFixed( 2 ) );\r\n\r\n    let minutes = Math.ceil( ( hours%1 ) * 60 );\r\n    hours = Math.floor( hours );\r\n    const dt = new Date( 0 );\r\n    dt.setHours( dt.getHours() + hours, dt.getMinutes() + minutes, 0, 0 );\r\n\r\n    return ( dt.getTime() - new Date( 0 ).getTime() );\r\n};\r\n\r\nexport const msToTime = ( ms )=>{\r\n\r\n    const dt = new Date(0 );\r\n\r\n    dt.setHours( 0 );\r\n    dt.setMilliseconds( ms );\r\n\r\n    const zeroDate = new Date( 0 );\r\n    zeroDate.setHours( 0 );\r\n    let hours = ( dt.getHours() - zeroDate.getHours() ).toString();\r\n\r\n\r\n    if( hours.length === 1 ) hours = '0' + hours;\r\n\r\n    let minutes = ( dt.getMinutes() - zeroDate.getMinutes() );\r\n    if( dt.getSeconds() - zeroDate.getSeconds() ) minutes += 1;\r\n    if( minutes.toString().length === 1 ) minutes = '0' + minutes;\r\n\r\n    if( hours === '00' && ms >=  IS_24_HOURS_OF_MS )\r\n    {\r\n        hours = '24';\r\n        minutes = '00';\r\n    }\r\n    return{\r\n      hours\r\n        , minutes: minutes.toString()\r\n    };\r\n};\r\n\r\nexport const updatePropertyOfTracks = (tracks )=>{\r\n\r\n    return tracks.map( ( v )=>{\r\n        return {...v\r\n            ,line_left: msToPixels( v.start_ms )\r\n            ,line_width: msToPixels( v.end_ms - v.start_ms )\r\n            , sign_time: updateTimeTrack( v )\r\n\r\n        };\r\n\r\n\r\n    });\r\n\r\n};\r\n\r\nexport const updateTimeTrack = ( trackData )=>{\r\n\r\n\r\n    const startTime = msToTime( trackData.start_ms );\r\n    const endTime = msToTime( trackData.end_ms );\r\n    const durationTime = msToTime( trackData.end_ms - trackData.start_ms );\r\n\r\n    return `${ startTime.hours}:${ startTime.minutes} - ${ endTime.hours}:${ endTime.minutes}`+\r\n        `( ${ durationTime.hours}ч ${ durationTime.minutes }мин)`;\r\n};\r\n","import {updatePropertyOfTracks} from \"../track_sheduler/utils\";\r\n\r\nconst servantFileUpload = ( state, action )=>{\r\n\r\n\r\n    let {\r\n        tracks\r\n    } = state;\r\n\r\n    const {\r\n        value\r\n    } = action;\r\n\r\n    tracks = [ ...tracks, ...value.map( ( v ) =>{\r\n        return{\r\n            name: v\r\n            , start_ms: 0\r\n            , end_ms: 3600000\r\n        }\r\n    })];\r\n\r\n    return{\r\n            ...state\r\n            , tracks: updatePropertyOfTracks( tracks )\r\n    };\r\n};\r\n\r\nexport default servantFileUpload;","import {updatePropertyOfTracks} from \"../track_sheduler/utils\";\r\n\r\nconst servantInit = (state )=>{\r\n\r\n\r\n    let {\r\n        tracks\r\n    } = state;\r\n\r\n    tracks = updatePropertyOfTracks( tracks );\r\n\r\n    return{\r\n        ...state\r\n        , tracks\r\n    };\r\n};\r\n\r\nexport default servantInit;","import {pixelsToMs, updatePropertyOfTracks, updateTimeTrack} from \"../track_sheduler/utils\";\r\n\r\nconst servantOnChangeTrack = (state, action )=>{\r\n\r\n\r\n    let { tracks } = state;\r\n\r\n\r\n    const changedTrack = action.value;\r\n    tracks[ changedTrack.id ]= {\r\n        ...tracks[ changedTrack.id ]\r\n        , start_ms: pixelsToMs( changedTrack.left )\r\n        , end_ms: pixelsToMs( changedTrack.left + changedTrack.width )\r\n    };\r\n\r\n    tracks[ changedTrack.id ].sign_time = updateTimeTrack(  tracks[ changedTrack.id ]);\r\n\r\n    return{\r\n        ...state\r\n        , tracks: [ ...tracks ]\r\n    };\r\n};\r\n\r\nexport default servantOnChangeTrack;","import servantFileUpload from \"./servantFileUpload\";\r\nimport {ACTION_INIT, ON_CHANGE_FILES, ON_CHANGE_TRACK} from \"../track_sheduler/consts\";\r\nimport servantInit from \"./servantInit\";\r\nimport servantOnChangeTrack from \"./servantOnChangeTrack\";\r\n\r\nexport const store = {\r\n    tracks:[\r\n        {\r\n            name: 'Track I'\r\n            , start_ms: 5580000\r\n            , end_ms: 3600000 * 12.16\r\n\r\n        }\r\n        , {\r\n            name: 'Track II'\r\n            , start_ms: 3600000 * 1.5\r\n            , end_ms: 3600000 * 4\r\n        }\r\n        , {\r\n            name: 'Track IITrack IITrack IITrack IITrack IITrack II'\r\n            , start_ms: 11880000\r\n            , end_ms: 3600000 * 15.38\r\n        }\r\n        , {\r\n            name: 'IITrack IITrack IITrack II'\r\n            , start_ms: 150000\r\n            , end_ms: 3600000\r\n        }\r\n    ]\r\n\r\n};\r\n///TODO: Дописать удаление трека\r\n\r\nexport default function reducer ( state = store, action ) {\r\n\r\n    switch ( action.type ) {\r\n\r\n        /// init здесь вместо какого нибудь промиса, откуда будут получены\r\n        /// начальные данные о треках\r\n        case ACTION_INIT:\r\n            state =servantInit( state )\r\n            break;\r\n        case ON_CHANGE_FILES:\r\n            state = servantFileUpload( state, action );\r\n            break;\r\n\r\n        case ON_CHANGE_TRACK:\r\n            state = servantOnChangeTrack( state, action );\r\n            break;\r\n\r\n        default: throw new Error( 'Received unknown action type!');\r\n\r\n    }\r\n\r\n\r\n\r\n    return state;\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './css/index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {Provider} from 'react-redux';\nimport {createStore} from 'redux';\nimport reducer from \"./reduser/index\";\n\nconst store = createStore( reducer ) ;\n\nReactDOM.render(\n    <Provider store={ store  } >\n      <React.StrictMode>\n        <App />\n      </React.StrictMode>\n    </Provider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}