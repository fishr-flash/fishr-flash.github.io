{"version":3,"sources":["track_sheduler/consts.js","track_sheduler/utils.js","reduser/servantFileUpload.js","reduser/servantInit.js","reduser/servantOnChangeTrack.js","reduser/index.js","App.js","track_sheduler/TrackScheduler.jsx","track_sheduler/TrackUploader.jsx","reportWebVitals.js","track_sheduler/TrackLine.jsx","track_sheduler/Tracks.jsx","index.js"],"names":["ON_CHANGE_FILES","ON_CHANGE_TRACK","ACTION_INIT","BUILD_ACTION_INIT","ONE_HOUR","pixelSize","IS_24_HOURS_OF_MS","msToPixels","ms","dt","Date","zeroDate","setMilliseconds","getMilliseconds","hours","getHours","minutes","getMinutes","Math","ceil","pixelsToMs","px","Number","toFixed","floor","setHours","getTime","msToTime","toString","length","getSeconds","updatePropertyOfTracks","tracks","map","v","line_left","start_ms","line_width","end_ms","sign_time","updateTimeTrack","trackData","startTime","endTime","durationTime","servantFileUpload","state","action","value","name","servantInit","servantOnChangeTrack","changedTrack","id","left","width","store","reducer","type","Error","App","className","TrackScheduler","oneHourTh","useRef","useEffect","current","getBoundingClientRect","document","defaultView","onresize","e","role","ref","connect","dispatch","onChangeFiles","multiple","accept","style","display","onChange","newFiles","target","files","htmlFor","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","onChangeTrack","props","track","onMouseDownArrow","arrow","onmousedown","ondragstart","rectArrow","shellTrackLine","parentNode","shellTrackLineRect","rightArrow","children","trackLine","trackLineRect","rightEdge","maxWidth","shiftX","clientX","onmousemove","nowLeft","nowWidth","slice","onmouseup","onMouseDown","onMouseDownTrack","currentTarget","leftArrow","trackRect","rightArrowRect","startPoint","diff","i","title","colSpan","createStore","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.dd18c3bb.chunk.js","sourcesContent":["///actions\r\nexport const ON_CHANGE_FILES = 'onChangeFiles';\r\nexport const ON_CHANGE_TRACK = 'onChangeTrack';\r\nexport const ACTION_INIT = '@@INIT';\r\nexport const BUILD_ACTION_INIT = '@@redux/INITl.t.h.1.7.t';\r\n\r\n\r\nexport const ONE_HOUR = { pixelSize: 34 };\r\nexport const IS_24_HOURS_OF_MS = 86400000;\r\n\r\n","import {IS_24_HOURS_OF_MS, ONE_HOUR} from \"./consts\";\r\n\r\nexport const msToPixels = (ms )=>{\r\n    const dt = new Date( 0 );\r\n    const zeroDate = new Date( 0 );\r\n    dt.setMilliseconds( dt.getMilliseconds() + ms );\r\n    let hours = ( dt.getHours() - zeroDate.getHours() );\r\n    let minutes = ( dt.getMinutes() - zeroDate.getMinutes() );\r\n    if( ms >= IS_24_HOURS_OF_MS )minutes = 0;\r\n    hours += minutes / 60;\r\n    if( ms >= IS_24_HOURS_OF_MS ) hours = 24;\r\n\r\n    return Math.ceil( hours * ONE_HOUR.pixelSize );\r\n};\r\n\r\nexport const pixelsToMs = (px )=>{\r\n\r\n    let hours = Number( Number( px / ONE_HOUR.pixelSize ).toFixed( 2 ) );\r\n\r\n    let minutes = Math.ceil( ( hours%1 ) * 60 );\r\n    hours = Math.floor( hours );\r\n    const dt = new Date( 0 );\r\n    dt.setHours( dt.getHours() + hours, dt.getMinutes() + minutes, 0, 0 );\r\n\r\n    return ( dt.getTime() - new Date( 0 ).getTime() );\r\n};\r\n\r\nexport const msToTime = ( ms )=>{\r\n\r\n    const dt = new Date(0 );\r\n\r\n    dt.setHours( 0 );\r\n    dt.setMilliseconds( ms );\r\n\r\n    const zeroDate = new Date( 0 );\r\n    zeroDate.setHours( 0 );\r\n    let hours = ( dt.getHours() - zeroDate.getHours() ).toString();\r\n\r\n\r\n    if( hours.length === 1 ) hours = '0' + hours;\r\n\r\n    let minutes = ( dt.getMinutes() - zeroDate.getMinutes() );\r\n    if( dt.getSeconds() - zeroDate.getSeconds() ) minutes += 1;\r\n    if( minutes.toString().length === 1 ) minutes = '0' + minutes;\r\n\r\n    if( hours === '00' && ms >=  IS_24_HOURS_OF_MS )\r\n    {\r\n        hours = '24';\r\n        minutes = '00';\r\n    }\r\n    return{\r\n      hours\r\n        , minutes: minutes.toString()\r\n    };\r\n};\r\n\r\nexport const updatePropertyOfTracks = (tracks )=>{\r\n\r\n    return tracks.map( ( v )=>{\r\n        return {...v\r\n            ,line_left: msToPixels( v.start_ms )\r\n            ,line_width: msToPixels( v.end_ms - v.start_ms )\r\n            , sign_time: updateTimeTrack( v )\r\n\r\n        };\r\n\r\n\r\n    });\r\n\r\n};\r\n\r\nexport const updateTimeTrack = ( trackData )=>{\r\n\r\n\r\n    const startTime = msToTime( trackData.start_ms );\r\n    const endTime = msToTime( trackData.end_ms );\r\n    const durationTime = msToTime( trackData.end_ms - trackData.start_ms );\r\n\r\n    return `${ startTime.hours}:${ startTime.minutes} - ${ endTime.hours}:${ endTime.minutes}`+\r\n        `( ${ durationTime.hours}ч ${ durationTime.minutes }мин)`;\r\n};\r\n","import {updatePropertyOfTracks} from \"../track_sheduler/utils\";\r\n\r\nconst servantFileUpload = ( state, action )=>{\r\n\r\n\r\n    let {\r\n        tracks\r\n    } = state;\r\n\r\n    const {\r\n        value\r\n    } = action;\r\n\r\n    tracks = [ ...tracks, ...value.map( ( v ) =>{\r\n        return{\r\n            name: v\r\n            , start_ms: 0\r\n            , end_ms: 3600000\r\n        }\r\n    })];\r\n\r\n    return{\r\n            ...state\r\n            , tracks: updatePropertyOfTracks( tracks )\r\n    };\r\n};\r\n\r\nexport default servantFileUpload;","import {updatePropertyOfTracks} from \"../track_sheduler/utils\";\r\n\r\nconst servantInit = (state )=>{\r\n\r\n\r\n    let {\r\n        tracks\r\n    } = state;\r\n\r\n    tracks = updatePropertyOfTracks( tracks );\r\n\r\n    return{\r\n        ...state\r\n        , tracks\r\n    };\r\n};\r\n\r\nexport default servantInit;","import {pixelsToMs, updatePropertyOfTracks, updateTimeTrack} from \"../track_sheduler/utils\";\r\n\r\nconst servantOnChangeTrack = (state, action )=>{\r\n\r\n\r\n    let { tracks } = state;\r\n\r\n\r\n    const changedTrack = action.value;\r\n    tracks[ changedTrack.id ]= {\r\n        ...tracks[ changedTrack.id ]\r\n        , start_ms: pixelsToMs( changedTrack.left )\r\n        , end_ms: pixelsToMs( changedTrack.left + changedTrack.width )\r\n    };\r\n\r\n    tracks[ changedTrack.id ].sign_time = updateTimeTrack(  tracks[ changedTrack.id ]);\r\n\r\n    return{\r\n        ...state\r\n        , tracks: [ ...tracks ]\r\n    };\r\n};\r\n\r\nexport default servantOnChangeTrack;","import servantFileUpload from \"./servantFileUpload\";\r\nimport {ACTION_INIT, BUILD_ACTION_INIT, ON_CHANGE_FILES, ON_CHANGE_TRACK} from \"../track_sheduler/consts\";\r\nimport servantInit from \"./servantInit\";\r\nimport servantOnChangeTrack from \"./servantOnChangeTrack\";\r\n\r\nexport const store = {\r\n    tracks:[\r\n        {\r\n            name: 'Track I'\r\n            , start_ms: 5580000\r\n            , end_ms: 3600000 * 12.16\r\n\r\n        }\r\n        , {\r\n            name: 'Track II'\r\n            , start_ms: 3600000 * 1.5\r\n            , end_ms: 3600000 * 4\r\n        }\r\n        , {\r\n            name: 'Track IITrack IITrack IITrack IITrack IITrack II'\r\n            , start_ms: 11880000\r\n            , end_ms: 3600000 * 15.38\r\n        }\r\n        , {\r\n            name: 'IITrack IITrack IITrack II'\r\n            , start_ms: 150000\r\n            , end_ms: 3600000\r\n        }\r\n    ]\r\n\r\n};\r\n///TODO: Дописать удаление трека\r\n\r\nexport default function reducer ( state = store, action ) {\r\n\r\n    switch ( action.type ) {\r\n\r\n        /// init здесь вместо какого нибудь промиса, откуда будут получены\r\n        /// начальные данные о треках\r\n        case BUILD_ACTION_INIT:\r\n        case ACTION_INIT:\r\n            state =servantInit( state )\r\n            break;\r\n        case ON_CHANGE_FILES:\r\n            state = servantFileUpload( state, action );\r\n            break;\r\n\r\n        case ON_CHANGE_TRACK:\r\n            state = servantOnChangeTrack( state, action );\r\n            break;\r\n\r\n        default: throw new Error( 'Received unknown action type! action.type:: ' + action.type );\r\n\r\n    }\r\n\r\n\r\n\r\n    return state;\r\n}","import React from 'react';\nimport TrackScheduler from \"./track_sheduler/TrackScheduler\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <TrackScheduler/>\n    </div>\n  );\n}\n\nexport default App;\n","import React, {useRef, useEffect } from 'react';\r\nimport '../css/index.css';\r\nimport Tracks from \"./Tracks\";\r\nimport OutInfoLayer from \"./OutInfoLayer\";\r\nimport TrackUploader from \"./TrackUploader\";\r\nimport { ONE_HOUR  } from \"./consts\";\r\n\r\nconst TrackScheduler = ()=>{\r\n\r\n\r\n    /// Работает неверно, не учитывает отступы\r\n    const oneHourTh = useRef( null );\r\n    useEffect(() => {\r\n        if( oneHourTh.current ){\r\n            // eslint-disable-next-line\r\n            ONE_HOUR.pixelSize  = oneHourTh.current.getBoundingClientRect().width;\r\n            document.defaultView.onresize = ( e )=>{\r\n                ONE_HOUR.pixelSize  = oneHourTh.current.getBoundingClientRect().width;\r\n                ///TODO: Доделать ресайз на лету\r\n            }\r\n            \r\n            /////////////////////////////CONSOLE/////////////////////////////////////\r\n                ///TODO: Console log in the code \"TRACK_SCHEDULER_JSX\" line 23\r\n                if( process && process.env.NODE_ENV === 'development' ){\r\n                    console.group( 'Console log in the code \"TRACK_SCHEDULER_JSX\" line 23' );\r\n                    console.info( 'ONE_HOUR.pixelSize: ', ONE_HOUR.pixelSize );\r\n                    console.info( 'this: ', this );\r\n                    //console.table( this );\r\n                    console.groupEnd();\r\n                }\r\n            /////////////////////////////END CONSOLE/////////////////////////////////\r\n        }\r\n    });\r\n\r\n    return(\r\n        <main role=\"main\">\r\n            <section>\r\n                <TrackUploader />\r\n                <table>\r\n                    <caption>Расписание</caption>\r\n                    <thead>\r\n                    <tr>\r\n                        <th>Название</th>\r\n                        <th> </th>\r\n                        <th ref={ oneHourTh }><span>00</span>:00</th>\r\n                        <th><span>01</span>:00</th>\r\n                        <th><span>02</span>:00</th>\r\n                        <th><span>03</span>:00</th>\r\n                        <th><span>04</span>:00</th>\r\n                        <th><span>05</span>:00</th>\r\n                        <th><span>06</span>:00</th>\r\n                        <th><span>07</span>:00</th>\r\n                        <th><span>08</span>:00</th>\r\n                        <th><span>09</span>:00</th>\r\n                        <th><span>10</span>:00</th>\r\n                        <th><span>11</span>:00</th>\r\n                        <th><span>12</span>:00</th>\r\n                        <th><span>13</span>:00</th>\r\n                        <th><span>14</span>:00</th>\r\n                        <th><span>15</span>:00</th>\r\n                        <th><span>16</span>:00</th>\r\n                        <th><span>17</span>:00</th>\r\n                        <th><span>18</span>:00</th>\r\n                        <th><span>19</span>:00</th>\r\n                        <th><span>20</span>:00</th>\r\n                        <th><span>21</span>:00</th>\r\n                        <th><span>22</span>:00</th>\r\n                        <th><span>23</span>:00</th>\r\n                        <th> </th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <Tracks />\r\n                    </tbody>\r\n                </table>\r\n                {/*<OutInfoLayer/>*/}\r\n            </section>\r\n        </main>\r\n    )\r\n};\r\n\r\nexport default TrackScheduler;","import React from 'react';\r\nimport {connect } from 'react-redux';\r\nimport {ON_CHANGE_FILES} from \"./consts\";\r\n\r\nconst TrackUploader = ( { onChangeFiles })=>{\r\n\r\n    const changeHandler = ( e ) => {\r\n        const newFiles = [ ...e.target.files ].map( ( v )=>{\r\n            return v.name;\r\n        });\r\n        onChangeFiles( newFiles );\r\n    };\r\n\r\n    return(\r\n        <div>\r\n            <input type=\"file\" id=\"fileElem\"\r\n                   multiple accept=\"audio/*\"\r\n                   style={{display:'none'}}\r\n                   onChange={ changeHandler }/>\r\n            <label htmlFor=\"fileElem\" className={'button_files'}>Добавить треки</label>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default connect(\r\n    null\r\n    ,dispatch => ({\r\n        onChangeFiles: ( v ) => {\r\n            dispatch( {type: ON_CHANGE_FILES, value: v })\r\n        }\r\n    })\r\n)( TrackUploader );","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport {connect} from \"react-redux\";\r\nimport {ON_CHANGE_TRACK} from \"./consts\";\r\n\r\nconst TrackLine = ( props )=>{\r\n  const { line_left\r\n            , line_width\r\n            , sign_time\r\n            } = props.track;\r\n\r\n\r\n    const {onChangeTrack, id } = props;\r\n\r\n    const styleLeft = 10;\r\n    const minimumLength = 10;\r\n\r\n    const onMouseDownArrow = ( e )=>{\r\n        const arrow = e.target;\r\n        arrow.onmousedown = null;\r\n        arrow.ondragstart = ()=> false;\r\n\r\n\r\n        const rectArrow = arrow.getBoundingClientRect();\r\n        const shellTrackLine = arrow.parentNode;\r\n        const shellTrackLineRect = shellTrackLine.getBoundingClientRect();\r\n        const rightArrow = shellTrackLine.children[ 2 ];\r\n        const trackLine = shellTrackLine.children[ 1 ];\r\n        const trackLineRect = trackLine.getBoundingClientRect();\r\n        const rightEdge = ( trackLineRect.left - shellTrackLineRect.left ) + ( trackLineRect.width - rectArrow.width - minimumLength ) ;\r\n        const maxWidth = ( shellTrackLineRect.width + shellTrackLineRect.left ) - trackLineRect.left - rectArrow.width;\r\n        const shiftX = arrow.className === 'arrow_left'\r\n            ? ( e.clientX - rectArrow.left )\r\n            : e.clientX - trackLineRect.width - trackLineRect.left;\r\n\r\n        document.onmousemove = ( e )=>{\r\n\r\n            if( arrow.className === 'arrow_left' ){\r\n                let nowLeft = ( e.clientX - shellTrackLineRect.left ) - shiftX;\r\n                if( nowLeft < 0 ) nowLeft = 0;\r\n                else if ( nowLeft > rightEdge ) nowLeft = rightEdge;\r\n                arrow.style.left = nowLeft + 'px';\r\n\r\n\r\n                const nowWidth = ( ( rightEdge - nowLeft ) + styleLeft );\r\n                trackLine.style.left =  nowLeft + 'px';\r\n                trackLine.style.width = nowWidth + 'px';\r\n                rightArrow.style.left = ( nowLeft ) + 'px';\r\n\r\n\r\n                onChangeTrack( { id\r\n                                , left: nowLeft\r\n                                , width: nowWidth });\r\n            } else{\r\n\r\n                let nowWidth = e.clientX - trackLineRect.left - shiftX;\r\n\r\n                if( nowWidth < minimumLength ) nowWidth = minimumLength;\r\n                else if( nowWidth > maxWidth ) nowWidth = maxWidth;\r\n                trackLine.style.width = nowWidth + 'px';\r\n\r\n                const left = trackLine.style.left;\r\n                const nowLeft = Number( left.slice( -left.length, left.length - 2 ) );\r\n\r\n                onChangeTrack( {\r\n                    id\r\n                    , left: nowLeft\r\n                    , width: nowWidth }   );\r\n\r\n            }\r\n\r\n\r\n\r\n\r\n        };\r\n\r\n        document.onmouseup = ()=>{\r\n            document.onmousemove =null;\r\n            document.onmouseup =null;\r\n            arrow.onmousedown = onMouseDownArrow;\r\n        };\r\n\r\n    };\r\n\r\n    const onMouseDownTrack = ( e )=>{\r\n\r\n        e.target.onmousedown = null;\r\n        e.target.ondragstart = ()=> false;\r\n\r\n        const shellTrackLine = e.currentTarget.parentNode;\r\n        const shellTrackLineRect = shellTrackLine.getBoundingClientRect();\r\n        const leftArrow = shellTrackLine.children[ 0 ];\r\n        const track = shellTrackLine.children[ 1 ];\r\n        const trackRect = track.getBoundingClientRect();\r\n        const rightArrow = shellTrackLine.children[ 2 ];\r\n        const rightArrowRect = rightArrow.getBoundingClientRect();\r\n        let startPoint = trackRect.left;\r\n        let shiftX = e.clientX - trackRect.left - styleLeft;\r\n        if( track.style.left ){\r\n            const left = track.style.left;\r\n            const nowLeft = Number( left.slice( -left.length, left.length - 2 ) );\r\n            startPoint = startPoint - nowLeft;\r\n            shiftX = e.clientX - trackRect.left;\r\n        }\r\n\r\n\r\n        const rightEdge = shellTrackLineRect.width  - ( rightArrowRect.width * 2 + trackRect.width );\r\n\r\n\r\n        document.onmousemove = ( e )=>{\r\n\r\n\r\n            let diff = e.clientX - startPoint - shiftX;\r\n            if( diff < 0 ) diff = 0;\r\n            else if( diff > rightEdge ) diff = rightEdge;\r\n            track.style.left = diff + 'px';\r\n            leftArrow.style.left = diff + 'px';\r\n            rightArrow.style.left = diff + 'px';\r\n\r\n\r\n            const width = track.style.width;\r\n            const nowWidth = Number( width.slice( -width.length, width.length - 2 ) );\r\n\r\n            onChangeTrack( {\r\n                id\r\n                , left: diff\r\n                , width: nowWidth } );\r\n        };\r\n\r\n        document.onmouseup = ( )=>{\r\n            track.onmousedown = onMouseDownTrack;\r\n            document.onmousemove = null;\r\n            document.onmouseup = null;\r\n        };\r\n\r\n\r\n    };\r\n\r\n\r\n\r\n    return(\r\n\r\n      <div className=\"shell_track_line\">\r\n          <div className=\"arrow_left\"\r\n               style={{ left: line_left }}\r\n               onMouseDown={ onMouseDownArrow }\r\n          > </div>\r\n          <div className=\"track_line\"\r\n               style={{ left: line_left, width: line_width}}\r\n               onMouseDown={ onMouseDownTrack } >\r\n              <div className=\"in_info\">\r\n                  { sign_time }\r\n              </div>\r\n          </div>\r\n          <div className=\"arrow_right\"\r\n               style={{ left: line_left }}\r\n               onMouseDown={ onMouseDownArrow }\r\n          > </div>\r\n      </div>\r\n\r\n\r\n  );\r\n};\r\n\r\nexport default connect(\r\n    null\r\n    ,dispatch => ({\r\n        onChangeTrack: ( v ) => {\r\n            dispatch( {type: ON_CHANGE_TRACK, value: v })\r\n        }\r\n    })\r\n)( TrackLine );","import React from 'react';\r\nimport {connect} from \"react-redux\";\r\nimport TrackLine from \"./TrackLine\";\r\n\r\nconst Tracks = ( { tracks })=> {\r\n\r\n    return tracks.map( ( v, i )=>(\r\n\r\n        <tr key={'tr_track' + i }>\r\n            <td title={ v.name } >{ v.name }</td>\r\n            <td colSpan=\"27\">\r\n                <TrackLine\r\n                    track={ v } id={ i } />\r\n\r\n            </td>\r\n        </tr>\r\n\r\n    ) );\r\n};\r\n\r\nexport default connect(\r\n\r\n    state => {\r\n        return ({\r\n            tracks: state.tracks\r\n        });\r\n    }, null\r\n)( Tracks );","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './css/index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport {Provider} from 'react-redux';\r\nimport {createStore} from 'redux';\r\nimport reducer from \"./reduser/index\";\r\n\r\nconst store = ( process && process.env.NODE_ENV === 'development' ) ?\r\n    createStore( reducer,window.__REDUX_DEVTOOLS_EXTENSION__\r\n        && window.__REDUX_DEVTOOLS_EXTENSION__())\r\n    : createStore( reducer ) ;\r\n\r\nReactDOM.render(\r\n    <Provider store={ store  } >\r\n      <React.StrictMode>\r\n        <App />\r\n      </React.StrictMode>\r\n    </Provider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}